service:
  type: ClusterIP
  port: ${service_port}

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
  hosts:
  - host: ${fqdn}
    paths:
    - path: /
      pathType: Prefix
  tls:
  - secretName: tls-secret
    hosts:
    - ${fqdn}
    
# Enabling this makes seqr look for passwords in both kibana and ES secrets and 
# mount them in as SEQR_ELASTICSEARCH_PASSWORD and KIBANA_ELASTICSEARCH_PASSWORD.
# BUGBUG the ES user is hardcoded to 'seqr' but the default ES Helm user is 'elastic'.
# enable_elasticsearch_auth: true

environment:
  POSTGRES_USERNAME: ${pg_user}
  POSTGRES_SERVICE_HOSTNAME: ${pg_host}
  ELASTICSEARCH_SERVICE_HOSTNAME: elasticsearch-master
  ELASTICSEARCH_PROTOCOL: https
  STATIC_MEDIA_DIR: static
