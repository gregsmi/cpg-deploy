service:
  type: ClusterIP
  port: ${service_port}

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
  hosts:
  - host: ${fqdn}
    paths:
    - path: /
      pathType: Prefix
  tls:
  - secretName: tls-secret
    hosts:
    - ${fqdn}
    
image:
  # Fully-qualified image repo/name and tag.
  repository: ${image_repo}
  tag: ${image_tag}

# Enabling this makes seqr look for passwords in both kibana and ES secrets 
# and mount the passwords in as KIBANA_ES_PASSWORD and SEQR_ES_PASSWORD.
enable_elasticsearch_auth: true

environment:
  POSTGRES_USERNAME: ${pg_user}
  POSTGRES_SERVICE_HOSTNAME: ${pg_host}
  ELASTICSEARCH_SERVICE_HOSTNAME: elasticsearch-master
  ELASTICSEARCH_PROTOCOL: https
  STATIC_MEDIA_DIR: static
  # BUGBUG when auth is on the ES/kibana users are hardcoded to 'seqr'/'kibana' 
  # respectively but the default Helm user for ES & kibana is 'elastic'.
  KIBANA_ELASTICSEARCH_USER: elastic
  ELASTICSEARCH_USER: elastic
  
